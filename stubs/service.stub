<?php

namespace App\Services;

use App\Models\{{ model }};

class {{ model }}Service
{
    public function list($data = [], $is_query_only = false, $is_paginated = true)
    {
        $order = "asc";

        $query = {{ model }}::query();

        $query = $query->with([]);

        //filter options
        {{ filters }}

        if ($is_query_only === true) {
            return $query;
        }

        if ($is_paginated === true) {
            $item_per_page = isset($data['item_per_page']) ? $data['item_per_page'] : config('constants.pagination.per_page');
            ${{ table }} = $query->paginate($item_per_page)->appends($data);
            ${{ table }}->pagination_summary = get_pagination_summary(${{ table }});
        } else {
            ${{ table }} = $query->get();
        }

        return ${{ table }};
    }

    public function create(array $data)
    {
        return {{ model }}::create($data);
    }

    public function update({{ model }} $model, array $data)
    {
        return $model->update($data);
    }

    public function delete({{ model }} $model)
    {
        return $model->delete();
    }

    public function find($id)
    {
        return {{ model }}::findOrFail($id);
    }
}
